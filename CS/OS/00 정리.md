면접을 위한 CS 전공지식 노트를 읽고 정리한 문서입니다.

# 00 정리

## SECTION 1 운영체제

### 1. 역할

- CPU 스케쥴링, 프로세스 관리
- 메모리 관리
- 디스크 파일 관리
- I/O 디바이스 관리

### 2. 구조

- 응용프로그램
- **인터페이스**
- **시스템콜**
- **커널**
- **드라이버**
- 하드웨어

인터페이스부터 드라이버까지가 운영체제이다.

### 3. 시스템콜

![image](https://github.com/jdi022222/TIL/assets/97517890/0369e8ca-71bb-495e-beb9-2a2d19c0b545)

- 응용프로그램이 운영제제 서비스를 이용하기 위해 커널 함수를 호출할 때 사용하는 인터페이스
- 응용프로그램이 I/O 요청으로 트랩을 발동하면 올바른 요청인지 확인 후 시스템 콜로 유저모드 -> 커널모드 변환해서 실행
- modebit 0 이면 커널모드, 1이면 유저모드

### 4. CPU

메모리에 존재하는 명령어를 해석해서 실행, 인터럽트 발생시 현재 작업을 저장 후 인터럽트 서비스 루틴을 우선 수행

- ALU :산술 논리 연산 장치
- 제어장치 : 프로세스 제어, 명령어 해석 및 데이터 처리 순서 결정
- 레지스터 : 매우 빠른 임시기억장치

### 5. CPU 연산 과정

![image](https://github.com/jdi022222/TIL/assets/97517890/37cadbf2-386b-41e9-824c-c6076e7ae58b)

1. 제어장치가 메모리와 레지스터에 계산할 값을 로드
2. 제어장치가 레지스터의 값을 ALU를 통해 계산하고 결과값을 레지스터에서 메모리로 이동

### 6. 인터럽트

- 어떤 신호(IO 디바이스, 산술연산 오류, 프로세스 오류)가 들어왔을 때 CPU를 잠깐 정지시키는 것. 발생시 인터럽트 핸들러 함수를 실행

## SECTION 2 메모리

CPU는 메모리에 있는 명령어들을 실행할 뿐이다.

CPU가 일꾼이면 메모리는 작업장

운영체제가 하는 대표적인 역할 중 하나가 메모리 관리

### 1. 메모리 계층

![image](https://github.com/jdi022222/TIL/assets/97517890/c1ecde01-6e37-4d26-83be-a8e36c1292e3)

- 레지스터 : CPU 안의 작은 메모리, 휘발성, 빠르지만 용량이 가장 적고 비쌈
- **캐시** : L1, L2, L3 캐시를 지칭, 휘발성, 빠르지만 용량이 적음, 데이터를 미리 복사해두어 메모리와 CPU 코어 사이의 속도차이를 해결
- 메모리/주기억장치 : RAM, 휘발성, 속도 보통이고 용량도 보통
- 저장장치/보조기억장치 : HDD, SSD, 비휘발성, 속도 낮지만 용량이 큼

**캐시히트** : 캐시에서 데이터 찾음. CPU 내부 버스를 이용해 속도가 빠름

**캐시미스** : 캐시에서 데이터를 찾지 못해 메모리 조회. 시스템 버스를 이용해 속도가 느림

> 캐시는 계층간의 데이터 접근 속도 차이를 해결해 병목 현상을 줄이기 위한 메모리를 말한다.
> CPU 내부에는 L1, L2 레벨 별 캐시가 사용되어 데이터 사용/참조에 가장 먼저 사용이 된다.
> 브라우저에는 쿠키, 로컬스토리지, 세션스토리지가 사용되며 DB와 시스템 사이에 Redis 계층을 두기도 한다.

### 2.메모리 관리

#### 가상메모리

- 가상 메모리는 메모리 관리 기법 중 하나로 메모리 자원을 추상화하여 사용자에게 큰 메모리처럼 보이게 하는 기술
- 물리적 메모리(RAM)의 한계를 극복하기 위해 디스크 공간을 보조로 사용하는 기술

![image](https://github.com/jdi022222/TIL/assets/97517890/0574bbbe-68dd-451d-9292-a9b1b51be5d4)

- 가상 메모리는 가상 주소와 실제 주소가 매핑되어 있으며 메모리 관리 장치 MMU를 통해 사용자가 가상 주소로 요청해도 실제 주소를 조회해 데이터를 반환.
- 만약, 실제 주소에 데이터가 없다면 **페이지 폴트**가 발생하며 스와핑을 진행한다.

1. 프로세스가 요청한 페이지가 RAM에 없는 경우 **페이지 폴트 발생**
2. 페이지 폴트가 발생하여 요청된 페이지를 디스크에서 RAM으로 로드
3. 스와핑이 발생하여 현재 사용되지 않는 페이지를 디스크로 옮기고 새로운 페이지를 RAM으로 로드
4. 비어있는 프레임에 해당 페이지를 로드하고 페이지 테이블 최신화

> 페이지 : 가상 메모리 사용하는 최소 크기 단위
>
> 프레임 : 실제 메모리 사용하는 최소 크기 단위

프로그램을 디스크에서 메모리로 적재하는 과정에서 단편화가 발생함. -> 메모리 계산 비용이 적은 페이징과 세그멘테이션으로 해결

#### 스레싱

#### 메모리 할당

불연속 할당

- 현대 운영체제가 메모리를 할당할 때 사용
- 페이징 : 동일한 크기의 페이지 단위로 메모리를 나누며 홀이 적어지지만 주소 변환이 복잡
- 세그멘테이션 : 논리덕 단위인 세그먼트로 나누어 공유와 보안이 뛰어나지만 홀 크기 불균형

#### 페이지 교체 알고리즘

- 오프라인 알고리즘 : 미래에 참조될 페이지와 현재 페이지 교체. 실현불가
- FIFO
- LRU
- LFU

## SECTION 3 프로세스와 스레드

프로세스 : 현재 실행되는 프로그램. 프로그램이 메모리에 올라가 인스턴스화된 것
스레드 : 프로세스 내 작업의 흐름

### 프로세스의 컴파일 과정

이진 실행 파일인(exe) 프로그램을 인스턴스화한 것을 **프로세스**라고 한다.

#### 링커

- 프로그램 안의 라이브러리 함수나 다른 파일과 목적 코드를 결합해 실행 파일을 만듦

### 프로세스의 상태

### 프로세스 메모리 구조

### PCB

- 컨텍스트 스위칭

### 멀티 프로세싱

### 멀티스레딩

### 공유 자원과 임계영역

- 뮤텍스
- 세마포어

#### 교착상태

원인

- 상호배제
- 점유대기
- 비선점
- 환형대기

## SECTION 4 CPU 스케쥴링 알고리즘

### 1. 비선점형

#### FCFS

#### SJF

#### 우선순위

### 2. 선점형

#### 라운드로빈

#### SRF

#### 다단계 큐