# 02 DDD 아키텍처 개요

표현, 응용, 도메인, 인프라스트럭쳐는 DDD 아키텍쳐를 설계할 때의 대표적인 네 가지 영역이다.
- 표현 : 사용자의 요청을 응용에 전달하고 처리 결과를 다시 사용자에게 보여준다. spring MVC가 표현 영역을 위한 기술이다.
- 응용 : 실제 기능 구현이다. 기능을 구현하기 위해 도메인 용역의 도메인 모델을 이용한다. 응용 서비스는 로직을 직접 수행하기보다 도메인 모델에 로직 수행을 위임한다. 
- 도메인 : 도메인 모델을 구현한다. 도메인의 핵심 로직을 가진다.
- 인프라스트럭쳐 : 구현 기술에 대한 것을 다룬다. 논리적인 개념보다는 실제 구현을 다룬다.
도메인, 응용, 표현 영역은 구현 기술을 사용한 코드를 직접 만들지 않으며 인프라에서 제공하는 기능을 사용해서 필요한 기능을 만든다.

각 계층 구조는 상위 계층에서 하위 계층으로 단방향 의존하게 된다. 구현의 편리함을 위해 응용에서 인프라를 의존하기도 한다. 하지만 이런 방식은 테스트가 어려워진다. 응용 계층을 테스트 하기 위해서는 인프라가 완벽하게 구현이 되어있고 동작해야 비로소 테스트가 가능해지기 때문이다.
결국, 테스트와 기능 확장이 어려워지게 된다. 이를 해결하기 위해 DIP를 이용한다.

DIP : 의존 역전 원칙이다. 저수준 모듈을 추상화한 인터페이스로 만들어 구현 객체를 생성자를 통해 전달한다.
DIP를 통해 대역 객체를 통해 인프라가 구현되어 있지 않더라도 응용 객체를 테스트할 수 있게 된다.
다만, 단순히 저수준 모듈에서 인터페이스를 추출하면, 도메인 영역은 여전히 인프라 영역을 의존하게 될 수도 있다. 따라서 추상화한 인터페이스는 고수준 모듈에 위치해야 한다.

도메인 영역의 주요 구성요소
- 엔티티
- 벨류
- 애그리거트
- 리포지터리
- 도메인 서비스
